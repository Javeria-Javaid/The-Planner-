<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Planner</title>
  <link rel="stylesheet" href="daily_planner.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>

<!-- ==================== MENU BAR ==================== -->
<div class="menu_bar">
  <div class="menu-items">
    <a href="index.html">Home</a>
    <div class="dropdown">
      <a href="#" class="dropbtn">Daily Planner</a>
      <div class="dropdown-content">
        <a href="weekly_planner.html" onclick="openTab(event,'Weekly')">Weekly Planner</a>
        <a href="Monthly_planner.html" onclick="openTab(event,'Monthly')">Monthly Planner</a>
      </div>
    </div>
    <a href="Journal.html">Journal</a>
    <a href="About.html">About</a>
    <a href="contact.html">Contact</a>
  </div>
</div>
<!-- ==================== END MENU BAR ==================== -->

<!-- ==================== MAIN CONTAINER ==================== -->
<div class="container">

  <!-- ==================== DATE CONTAINER ==================== -->
  <div class="date_container">
    <div class="date-txt">
      Today is <span id="date-display" class="date-display"></span>
    </div>
  </div>
  <!-- ==================== END DATE CONTAINER ==================== -->

  <!-- ==================== WRAPPER ==================== -->
  <div class="wrapper">
    <!-- ==================== SCHEDULE CONTAINER ==================== -->
    <div class="schedule_container">
      <div class="planner">
        <!-- Schedule Section -->
        <div class="schedule-section">
          <h2>SCHEDULE</h2>

          <!-- Schedule Header -->
          <div class="schedule-header">
            <div class="time-txt">TIME</div>
            <div class="activity-txt">ACTIVITY</div>
          </div>

          <!-- Schedule Items -->
          <div class="schedule-items">
            <!-- Pre-populated schedule items -->
            <div class="schedule-item">
              <input type="time" class="time-input" value="08:00">
              <input type="text" class="activity-input" placeholder="Enter activity...">
              <button class="delete-btn">Ã—</button>
            </div>

            <!-- Additional schedule items... -->
            <!-- Removed for brevity but keep all your existing schedule items -->

          </div>

          <!-- Add Task Button -->
          <button class="add-btn">+ Add Task</button>
        </div>
      </div>
    </div>
    <!-- ==================== END SCHEDULE CONTAINER ==================== -->

    <div class="notes_container">
      <h2 class="notes-title">Notes</h2>
      <textarea class="notes-content" id="notes-textarea" placeholder="Write your thoughts, reminders, or ideas here..."></textarea>
      <div class="notes-action">
        <span class="save-status" id="save-status"></span>
      </div>
    </div>
    <div class="test-container">
      <!-- ==================== TO-DO LIST CONTAINER ==================== -->
      <div class="todo-list">
        <h1>TO DO LIST</h1>

        <!-- Tasks Container -->
        <div class="tasks-container" id="tasks-container">
          <!-- Pre-populated to-do items -->
          <!-- Keep all your existing task items -->
        </div>

        <!-- Add Task Input -->
        <div class="input-container">
          <input type="text" id="new-task" placeholder="Enter a new task">
          <button id="add-btn">Add Task</button>
        </div>
      </div>
      <!-- ==================== END TO-DO LIST CONTAINER ==================== -->

      <div class="meal-section">
        <h2>MEAL</h2>
        <div class="Breakfast">
          <div class="meal-categories">
            <div class="meal-category">
              <h3>Breakfast</h3>
              <input type="text" class="meal-input" id="breakfast-input" placeholder="Type here.....">
            </div>
          </div>
        </div>

        <!-- Lunch -->
        <div class="meal-category">
          <h3>Lunch</h3>
          <input type="text" class="meal-input" id="lunch-input" placeholder="Type here.....">
        </div>

        <!-- Dinner -->
        <div class="meal-category">
          <h3>Dinner</h3>
          <input type="text" class="meal-input" id="dinner-input" placeholder="Type here.....">
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ==================== END MAIN CONTAINER ==================== -->

<div class="container">
  <div class="wrapper">
    <div class="second-container">


      <div class="test-container">
        <div class="water-tracker">
          <h2>WATER TRACKER</h2>
          <div class="water-stats">
            <span>Glasses: <span id="glasses-count">0</span>/8</span>
            <span class="water-goal">Daily Goal: 8 glasses</span>
          </div>
          <div class="water-glasses" id="water-glasses">
            <!-- Glasses will be added by JavaScript -->
          </div>
        </div>

        <div class="affirmation-container">
          <div class="affirmation">
            <h2>AFFIRMATION</h2>
            <textarea class="affirmation-content" id="affirmation-textarea" placeholder="I am charge of how I feel today and I choose happiness..."></textarea>
          </div>
        </div>
        <button id="download-pdf" class="save-btn">Download PDF</button>
      </div>
    </div>
  </div>
</div>

<!-- ==================== SCRIPTS ==================== -->
<script>
  // Display current date
  const date = new Date();
  const formattedDate = new Intl.DateTimeFormat('en-US', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }).format(date);
  document.getElementById('date-display').textContent = formattedDate;

  // Highlight active menu item
  const links = document.querySelectorAll('.menu_bar a');
  const currentURL = window.location.href;
  links.forEach(link => {
    if (link.href === currentURL) {
      link.classList.add('active');
    }
  });

  // Schedule section functionality
  document.querySelector('.add-btn').addEventListener('click', () => {
    const scheduleItems = document.querySelector('.schedule-items');
    const newItem = document.createElement('div');
    newItem.className = 'schedule-item';
    newItem.innerHTML = `
        <input type="time" class="time-input" value="14:00">
        <input type="text" class="activity-input" placeholder="Enter activity...">
        <button class="delete-btn">Ã—</button>
      `;
    scheduleItems.appendChild(newItem);

    // Add delete functionality
    newItem.querySelector('.delete-btn').addEventListener('click', () => {
      scheduleItems.removeChild(newItem);
    });
  });

  // Add delete functionality to existing schedule items
  document.querySelectorAll('.schedule-item .delete-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      this.parentElement.remove();
    });
  });

  // To-Do List functionality
  document.addEventListener('DOMContentLoaded', function() {
    const taskInput = document.getElementById('new-task');
    const addButton = document.getElementById('add-btn');
    const tasksContainer = document.getElementById('tasks-container');

    function addTask() {
      const taskText = taskInput.value.trim();
      if (taskText) {
        const emptySlots = document.querySelectorAll('.task-item .task-text:empty');
        if (emptySlots.length > 0) {
          emptySlots[0].textContent = taskText;
        } else {
          createTaskElement(taskText);
        }
        taskInput.value = '';
        taskInput.focus();
      }
    }

    function createTaskElement(text) {
      const taskItem = document.createElement('div');
      taskItem.className = 'task-item';

      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.className = 'task-checkbox';

      const taskSpan = document.createElement('span');
      taskSpan.className = 'task-text';
      taskSpan.textContent = text;

      const deleteBtn = document.createElement('button');
      deleteBtn.className = 'delete-btn';
      deleteBtn.textContent = 'Ã—';

      taskItem.appendChild(checkbox);
      taskItem.appendChild(taskSpan);
      taskItem.appendChild(deleteBtn);
      tasksContainer.appendChild(taskItem);

      checkbox.addEventListener('change', function() {
        taskSpan.classList.toggle('completed', this.checked);
      });

      deleteBtn.addEventListener('click', function() {
        if (tasksContainer.children.length > 5) {
          tasksContainer.removeChild(taskItem);
        } else {
          taskSpan.textContent = '';
          checkbox.checked = false;
          taskSpan.classList.remove('completed');
        }
      });
    }

    // Initialize event listeners for pre-added tasks
    document.querySelectorAll('.task-item').forEach(item => {
      const checkbox = item.querySelector('.task-checkbox');
      const taskSpan = item.querySelector('.task-text');
      const deleteBtn = item.querySelector('.delete-btn');

      checkbox.addEventListener('change', function() {
        taskSpan.classList.toggle('completed', this.checked);
      });

      deleteBtn.addEventListener('click', function() {
        taskSpan.textContent = '';
        checkbox.checked = false;
        taskSpan.classList.remove('completed');
      });
    });

    // Event listeners for adding tasks
    addButton.addEventListener('click', addTask);
    taskInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        addTask();
      }
    });

    taskInput.focus();
  });

  // Notes functionality
  document.addEventListener('DOMContentLoaded', function() {
    const notesTextarea = document.getElementById('notes-textarea');
    const saveBtn = document.getElementById('save-notes');
    const saveStatus = document.getElementById('save-status');

    const savedNotes = localStorage.getItem('dailyPlannerNotes');
    if (savedNotes) {
      notesTextarea.value = savedNotes;
    }

    saveBtn.addEventListener('click', function() {
      localStorage.setItem('dailyPlannerNotes', notesTextarea.value);
      saveStatus.textContent = "Notes saved successfully!";
      setTimeout(function() {
        saveStatus.textContent = "";
      }, 2000);
    });

    setInterval(function() {
      localStorage.setItem('dailyPlannerNotes', notesTextarea.value);
    }, 30000);
  });

  // Meal Tracker functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mealInputs = {
      breakfast: document.getElementById('breakfast-input'),
      lunch: document.getElementById('lunch-input'),
      dinner: document.getElementById('dinner-input')
    };

    function loadMeals() {
      const savedMeals = JSON.parse(localStorage.getItem('dailyMeals')) || {};
      for (const mealType in mealInputs) {
        if (savedMeals[mealType]) {
          mealInputs[mealType].value = savedMeals[mealType];
        }
      }
    }

    function saveMeal(mealType) {
      const mealValue = mealInputs[mealType].value.trim();
      const meals = JSON.parse(localStorage.getItem('dailyMeals')) || {};
      meals[mealType] = mealValue;
      localStorage.setItem('dailyMeals', JSON.stringify(meals));
    }

    loadMeals();

    // Auto-save when pressing Enter
    for (const mealType in mealInputs) {
      mealInputs[mealType].addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          saveMeal(mealType);
        }
      });
    }

    // Auto-save every 30 seconds
    setInterval(() => {
      for (const mealType in mealInputs) {
        if (mealInputs[mealType].value.trim()) {
          saveMeal(mealType);
        }
      }
    }, 30000);
  });

  // Water Tracker functionality
  document.addEventListener('DOMContentLoaded', function() {
    const waterGlassesContainer = document.getElementById('water-glasses');
    const glassesCountElement = document.getElementById('glasses-count');
    const totalGlasses = 8;
    let consumedGlasses = 0;

    // Load saved water intake
    const savedWater = localStorage.getItem('waterIntake');
    if (savedWater) {
      consumedGlasses = parseInt(savedWater);
    }

    // Create water glasses
    for (let i = 0; i < totalGlasses; i++) {
      const glass = document.createElement('div');
      glass.className = 'water-glass';
      glass.textContent = i + 1;
      glass.dataset.index = i;

      if (i < consumedGlasses) {
        glass.classList.add('filled');
      }

      glass.addEventListener('click', function() {
        const index = parseInt(this.dataset.index);
        const isFilled = this.classList.contains('filled');

        // Update all glasses
        document.querySelectorAll('.water-glass').forEach((glass, j) => {
          glass.classList.toggle('filled', !isFilled && j <= index);
        });

        // Update count
        consumedGlasses = isFilled ? index : index + 1;
        updateWaterStats();
        saveWaterIntake();
      });

      waterGlassesContainer.appendChild(glass);
    }

    function updateWaterStats() {
      glassesCountElement.textContent = consumedGlasses;
      const goalElement = document.querySelector('.water-goal');

      if (consumedGlasses >= totalGlasses) {
        goalElement.textContent = 'Goal reached! ðŸŽ‰';
        goalElement.style.fontWeight = 'bold';
      } else {
        goalElement.textContent = `Daily Goal: ${totalGlasses} glasses`;
        goalElement.style.fontWeight = 'normal';
      }
    }

    function saveWaterIntake() {
      localStorage.setItem('waterIntake', consumedGlasses.toString());
    }

    updateWaterStats();
  });

  // PDF Generation
  document.addEventListener('DOMContentLoaded', function() {
    const { jsPDF } = window.jspdf;

    document.getElementById('download-pdf').addEventListener('click', function() {
      const doc = new jsPDF();
      const today = new Date();
      const dateString = today.toLocaleDateString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });

      doc.setFontSize(20);
      doc.text(`Daily Planner - ${dateString}`, 14, 15);

      // Add your PDF generation logic here
      // (Keep all your existing PDF generation code)

      doc.save(`Daily_Planner_${today.toISOString().split('T')[0]}.pdf`);
    });
  });
</script>
</body>
</html>
