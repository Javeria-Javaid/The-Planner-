<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monthly Planner</title>
  <link rel="stylesheet" href="Monthly_planner.css">


</head>
<body>
<!-- ==================== MENU BAR ==================== -->
<div class="menu_bar">
  <div class="menu-items">
    <a href="index.html">Home</a>
    <div class="dropdown">
      <a href="#" class="dropbtn">Monthly Planner</a>
      <div class="dropdown-content">
        <a href="daily_planner.html" onclick="openTab(event,'Daily')">Daily Planner</a>
        <a href="weekly_planner.html" onclick="openTab(event,'Weekly')">Weekly Planner</a>

      </div>
    </div>
    <a href="Journal.html">Journal</a>
    <a href="About.html">About</a>
    <a href="contact.html">Contact</a>
  </div>

  <!-- ==================== END MENU BAR ==================== -->







  <div class="planner-container">
    <div class="planner-header">
      <h1>Monthly Planner</h1>
      <div class="month-controls">
        <select id="month-select"></select>
        <select id="year-select"></select>
      </div>
    </div>

    <div class="planner-content">
      <!-- Calendar Grid -->
      <div class="calendar-grid">
        <div class="weekday-header">MON</div>
        <div class="weekday-header">TUE</div>
        <div class="weekday-header">WED</div>
        <div class="weekday-header">THU</div>
        <div class="weekday-header">FRI</div>
        <div class="weekday-header">SAT</div>
        <div class="weekday-header">SUN</div>

        <!-- Calendar days will be inserted here by JavaScript -->
      </div>

      <!-- To-Do List Section -->
      <div class="todo-section">
        <div class="todo-column">
          <h3>To Do List</h3>
          <div class="task-input">
            <select id="task-date">
              <option value="">Select date</option>
            </select>
            <input type="text" id="new-task" placeholder="Task description">
            <button id="add-task">Add</button>
          </div>
          <ul class="task-list" id="tasks-list"></ul>
        </div>

        <div class="todo-column">
          <h3>Goals</h3>
          <div class="task-input">
            <select id="goal-date">
              <option value="">Select date</option>
            </select>
            <input type="text" id="new-goal" placeholder="Goal description">
            <button id="add-goal">Add</button>
          </div>
          <ul class="task-list" id="goals-list"></ul>
        </div>
      </div>
    </div>
  </div>

<script>
  // Data storage
  const tasks = {};
  const goals = {};

  // Initialize month dropdown
  const months = [
    "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"
  ];
  const monthSelect = document.getElementById('month-select');
  months.forEach((month, index) => {
    const option = document.createElement('option');
    option.value = index;
    option.textContent = month;
    if (index === new Date().getMonth()) {
      option.selected = true;
    }
    monthSelect.appendChild(option);
  });

  // Initialize year dropdown (current year ±5)
  const currentYear = new Date().getFullYear();
  const yearSelect = document.getElementById('year-select');
  for (let year = currentYear - 5; year <= currentYear + 5; year++) {
    const option = document.createElement('option');
    option.value = year;
    option.textContent = year;
    if (year === currentYear) {
      option.selected = true;
    }
    yearSelect.appendChild(option);
  }

  // Generate calendar days
  function generateCalendar() {
    const month = parseInt(monthSelect.value);
    const year = parseInt(yearSelect.value);
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const calendarGrid = document.getElementById('calendar-grid');

    // Clear existing days (keep headers)
    while (calendarGrid.children.length > 7) {
      calendarGrid.removeChild(calendarGrid.lastChild);
    }

    // Update date dropdowns
    updateDateDropdowns(daysInMonth);

    // Add empty cells for days before the 1st (Monday-start week)
    const startOffset = firstDay === 0 ? 6 : firstDay - 1;
    for (let i = 0; i < startOffset; i++) {
      calendarGrid.appendChild(document.createElement('div'));
    }

    // Add day cells
    for (let day = 1; day <= daysInMonth; day++) {
      const dayCell = document.createElement('div');
      dayCell.className = 'day-cell';
      dayCell.dataset.date = `${year}-${month+1}-${day}`;

      const dayNumber = document.createElement('div');
      dayNumber.className = 'day-number';
      dayNumber.textContent = day;
      dayCell.appendChild(dayNumber);

      // Check if date has tasks
      const dateKey = `${year}-${month+1}-${day}`;
      if (tasks[dateKey]?.length || goals[dateKey]?.length) {
        dayCell.classList.add('has-tasks');
      }

      calendarGrid.appendChild(dayCell);
    }
  }

  // Update date dropdowns
  function updateDateDropdowns(daysInMonth) {
    const month = parseInt(monthSelect.value) + 1;
    const year = parseInt(yearSelect.value);

    const taskDateSelect = document.getElementById('task-date');
    const goalDateSelect = document.getElementById('goal-date');

    // Clear existing options (keep first empty option)
    while (taskDateSelect.children.length > 1) {
      taskDateSelect.removeChild(taskDateSelect.lastChild);
    }
    while (goalDateSelect.children.length > 1) {
      goalDateSelect.removeChild(goalDateSelect.lastChild);
    }

    // Add new date options
    for (let day = 1; day <= daysInMonth; day++) {
      const dateStr = `${months[month-1]} ${day}`;
      const dateValue = `${year}-${month}-${day}`;

      const taskOption = document.createElement('option');
      taskOption.value = dateValue;
      taskOption.textContent = dateStr;
      taskDateSelect.appendChild(taskOption.cloneNode(true));

      const goalOption = taskOption.cloneNode(true);
      goalDateSelect.appendChild(goalOption);
    }
  }

  // Add task
  document.getElementById('add-task').addEventListener('click', function() {
    const date = document.getElementById('task-date').value;
    const taskText = document.getElementById('new-task').value.trim();

    if (date && taskText) {
      if (!tasks[date]) tasks[date] = [];
      tasks[date].push(taskText);

      const taskItem = document.createElement('li');
      taskItem.className = 'task-item';
      taskItem.innerHTML = `
                    ${taskText}
                    <span class="date-indicator">${formatDateDisplay(date)}</span>
                    <span onclick="removeTask('${date}', ${tasks[date].length-1}, 'task')">×</span>
                `;
      document.getElementById('tasks-list').appendChild(taskItem);

      document.getElementById('new-task').value = '';
      updateCalendarHighlights();
    }
  });

  // Add goal
  document.getElementById('add-goal').addEventListener('click', function() {
    const date = document.getElementById('goal-date').value;
    const goalText = document.getElementById('new-goal').value.trim();

    if (date && goalText) {
      if (!goals[date]) goals[date] = [];
      goals[date].push(goalText);

      const goalItem = document.createElement('li');
      goalItem.className = 'task-item';
      goalItem.innerHTML = `
                    ${goalText}
                    <span class="date-indicator">${formatDateDisplay(date)}</span>
                    <span onclick="removeTask('${date}', ${goals[date].length-1}, 'goal')">×</span>
                `;
      document.getElementById('goals-list').appendChild(goalItem);

      document.getElementById('new-goal').value = '';
      updateCalendarHighlights();
    }
  });

  // Remove task/goal
  window.removeTask = function(date, index, type) {
    if (type === 'task') {
      tasks[date]?.splice(index, 1);
      if (tasks[date]?.length === 0) delete tasks[date];
    } else {
      goals[date]?.splice(index, 1);
      if (goals[date]?.length === 0) delete goals[date];
    }

    // Regenerate lists
    renderLists();
    updateCalendarHighlights();
  };

  // Render all tasks and goals
  function renderLists() {
    const tasksList = document.getElementById('tasks-list');
    const goalsList = document.getElementById('goals-list');

    tasksList.innerHTML = '';
    goalsList.innerHTML = '';

    // Render tasks
    for (const date in tasks) {
      tasks[date].forEach((task, index) => {
        const taskItem = document.createElement('li');
        taskItem.className = 'task-item';
        taskItem.innerHTML = `
                        ${task}
                        <span class="date-indicator">${formatDateDisplay(date)}</span>
                        <span onclick="removeTask('${date}', ${index}, 'task')">×</span>
                    `;
        tasksList.appendChild(taskItem);
      });
    }

    // Render goals
    for (const date in goals) {
      goals[date].forEach((goal, index) => {
        const goalItem = document.createElement('li');
        goalItem.className = 'task-item';
        goalItem.innerHTML = `
                        ${goal}
                        <span class="date-indicator">${formatDateDisplay(date)}</span>
                        <span onclick="removeTask('${date}', ${index}, 'goal')">×</span>
                    `;
        goalsList.appendChild(goalItem);
      });
    }
  }

  // Update calendar highlights
  function updateCalendarHighlights() {
    document.querySelectorAll('.day-cell').forEach(cell => {
      cell.classList.remove('has-tasks');
      const date = cell.dataset.date;
      if ((tasks[date]?.length || goals[date]?.length) && date) {
        cell.classList.add('has-tasks');
      }
    });
  }

  // Format date for display
  function formatDateDisplay(dateStr) {
    const [year, month, day] = dateStr.split('-');
    return `${months[parseInt(month)-1]} ${parseInt(day)}`;
  }

  // Initialize calendar
  generateCalendar();

  // Update calendar when month/year changes
  monthSelect.addEventListener('change', generateCalendar);
  yearSelect.addEventListener('change', generateCalendar);
</script>
</body>
</html>
